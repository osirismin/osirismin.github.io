<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>我的家庭网络组网方案 - Monikio</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://img.monikio.com/2023/07/favicon.png><link href=/index.xml title=Monikio type=application/rss+xml><link rel=canonical href=https://monikio.com/zuwangfangan/><link rel=stylesheet href=/css/style.min.453c7dd711f8489d8f10b2087e333a9a6edfcf718b2e247fb27e5b6af278f194.css><meta name=description content="什么都能将就 唯有网络必须讲究"><meta property="og:title" content="我的家庭网络组网方案"><meta property="og:type" content="website"><meta property="og:url" content="https://monikio.com/zuwangfangan/"><meta property="og:image" content="https://img.monikio.com/2023/09/20230904-3.webp"><meta property="og:description" content="什么都能将就 唯有网络必须讲究"></head><body class='page page-blog-single'><div id=menu-main-mobile class=menu-main-mobile><ul class=menu><li><a href=https://monikio.com/>首页</a></li><li><a href=https://monikio.com/posts/>文章</a></li><li><a href=https://monikio.com/memos/>闲聊</a></li><li><a href=https://monikio.com/movies/>观影</a></li><li><a href=https://monikio.com/hardware/>好物</a></li><li><a href=https://monikio.com/apps/>软件</a></li></ul></div><div id=wrapper class=wrapper><div class=header-background><div class=header><div class=menu-main><div class=header-menu><a href=/>首页</a></div><div class=header-menu><a href=/posts/>文章</a></div><div class=header-menu><a href=/memos/>闲聊</a></div><div class=header-menu><a href=/movies/>观影</a></div><div class=header-menu><a href=/hardware/>好物</a></div><div class=header-menu><a href=/apps/>软件</a></div><a href=/index.xml target=_blank data-umami-event=Rss><img class=header-rss src=https://img.monikio.com/2023/07/rss.svg alt=RSS></a></div><div id=toggle-menu-main-mobile class=hamburger-trigger><button class=hamburger>Menu</button></div></div></div><script src="/js/moment.min.js?v=2.29.4"></script>
<script src=/js/moment.twitter.min.js></script>
<script>function formatDate(e){return typeof e=="number"&&(e=new Date(e*1e3).toISOString()),moment(Date.parse(e)).twitterLong().replace(/\s\d{2}:\d{2}/,"")}</script><div class=blog><div class=intro><h1 class=article_title>我的家庭网络组网方案</h1><div class=single-biaoq><div class=page-time>2023年7月25日</div><div class=single-tag><div class=single-tag-c><a href=/tags/%E5%AE%B6%E7%9A%84%E6%A0%B7%E5%AD%90/># 家的样子</a></div></div></div></div><div class=content_zhengwen><div class=content><p>不知不觉，网络，或者说上网的需求，已经入侵到人类的底层需求了。自2015年首次提出“提速降费”以来，中国宽带网络平均下载速率从2014年底的4.25Mbps提升至2023年一季度的<a href=http://www.xinhuanet.com/info/20230719/8a8b57de28ec4f7da591841575e9b0e6/c.html>79Mbps</a>，增长18.5倍。</p><p>尽管运营商的网络一直在提速降费，但很多人家里面的网络情况依旧不理想，无信号、信号差、卡顿、延迟高、断流……这「黑锅」有点大，不能全怪运营商。在“小宽带”时代，家庭接入的设备较少，互联网的内容还较为贫乏，终端接收和发送的数据量比较少，家里面往往一个路由器就可以满足需求。「时代变了」，“大宽带”时代，智能家居、电视、电脑、手机、平板都需要联网，购物、游戏、逛网页、刷视频，需要上传下载的数据量也大大增加，小马拉不动大火车。</p><p>解决上述问题其实很简单，买个好点的路由器就行了。如果解决不了或者有更高的需求，那就得考虑更高阶的家庭组网了。出现信号差、断流、卡顿、延迟高等原因，除了硬件性能，还有很大一部分原因是wifi信号覆盖不够理想。</p><p>众所周知，wifi信号通过电磁波在空中传播的，属于微波通信的一种，因为微波本身及发射功率的限制，导致wifi的穿透能力比较差，而比较厚的墙，门、家具等对都会对wifi信号有削弱。因此，在比较复杂的家庭环境中容易出现信号死角。</p><p>当然， 除了硬件和组网方式会影响网络外，网线类型也会限制路由器性能的发挥，但一般影响较小，除非黑心装修公司上了 5 类百兆线，或者业余接水晶头没接好……这个就不聊了。一般来说，影响网络的几大因素：</p><ul><li>运营商的问题（套餐、运维等问题）</li><li>路由器（性能不够）</li><li>网络设置（信道、dns、dhcp 等）</li><li>组网的问题（网络覆盖不全、设备间无缝漫游）</li><li>其他因素（水晶头、百兆网线……）
……
还有一种可能，就是运营商送的光猫拉胯，但一般不影响上网。最好是改成光猫桥接模式，然后让自己买的路由器去拨号，一方面可以减少一层 Nat，另一方面也可以发挥自己买的路由器的性能。有公网 IP 的话，那光猫桥接更是必不可少的步骤。</li></ul><h3 id=家庭组网方案>家庭组网方案</h3><p>一般来说，家庭组网方案有以下几种：</p><p><strong>单路由器</strong></p><p>单路由器摆放的基本原则是将路由器摆放在整个房间的中间位置，这样达到最好的信号覆盖效果。当然还要考虑到光猫的位置，很多运营商预留的光纤位置都在门口附近，那么你就需要通过房间预埋的网线来连接无线路由器，尽量放在全屋比较居中的位置。如果放在弱电箱，很大可能会出现信号覆盖较差的情况。</p><p>针对信号的问题，单路由还有打「补丁」的方案，信号放大器、电力猫、路由器桥接。「补丁」原理是接收路由器的信号，然后重新发射新的信号。信号放大器虽然对网络信号覆盖有了一定的提升，但是网络质量无法保证。路由器桥接、电力猫能较大提升网络的覆盖范围和稳定性，也是传统组网中大户型的常见解决方案，但存在无缝漫游问题，设备终端在两个信号间很难做到快速切换或者无缝切换。</p><p><strong>AC+AP组网</strong></p><p>AC+AP是目前唯一可以无限扩展、无缝漫游的简单组网方案，当然受限于不同的硬件，无缝漫游的效果也会有较大的差别。AC 可以简单理解为无线访问控制器，统一配置网络，负责拨号、管理、安全等功能。AP可以理解为无线交换机，用于无线信号的发射、传递、交换。这一组网方式下，一般由一台AC控制器和多个AP组成，所有的AP统一由AC控制器管理。</p><p><strong>Mesh组网</strong></p><p>mesh路由器一般要进行组网至少需要两台以上的设备，有「有线回程」和「无线回程」的两种组网方式，预留网线的话推荐有线回程组网，更稳定。Mesh网络是基于多跳，它不依赖于某一个节点的性能。某个节点流量过大而导致拥塞的话，数据可以自动选择到一个通信流量较小的邻近节点进行传输，如果某个节点故障或拆除，网络会自动适应这种改变，会自动选择更优的连接，一个节点不仅能传送和接收信息，还能充当路由器对其附近节点转发信息。</p><h3 id=小结>小结</h3><p>mesh 或 AC+AP 都可以达到满足全屋覆盖、漫游的目的。如果都是有线的话，mesh 组网达到的效果和 AC+AP 差不多。
总之，有钱无脑上 UniFi；没钱又想省心，买两三个 mesh 组网的路由器；爱折腾就买软路由。路由器按需购买，300-500 能用；500-1000 好用；1000 以上，壕做友……</p><h3 id=我的组网方案>我的组网方案</h3><p>路由器的形态在于千变万化。</p><p>我尝试过 ac+ap，一台 ars2 软路由器做 ac，两台路由器做 ap（redmi ax6000 和 ax3000）。后来买了 nas，很多软路由里的功能和需求就直接部署在 nas 里了，拆掉软路由，两台路由器组 mesh。一台在客厅，一台在书房，差不多是对角，做了热力图，基本全覆盖。</p><p>ac+ap 的方案中，<strong>正经的设备</strong>是一台 ac 控制器，和多个 ap 面板。ap 面板有装在墙上的，也有吸顶的，通过 poe 供电，无需像 mesh 路由器一样还要接电源，因此美观性上来说更胜一筹。</p><p>现在大多路由器都带了 mesh 组网，可以简单理解为，买两个路由器，放在两个位置，插网线使用更稳定。</p><p>DIY 的方案，软路由做 ac，路由器做 ap，也是 ac+ap，软路由的可玩性、可拓展性更高。</p><p>顺便说一下我的网络走线，光猫放在入户弱电箱里，留两根网线走线到客厅电视柜，接路由器，路由器接交换机，8 口交换机，3 个口接网线走到主卧、客卧和书房，交换机剩下的口留给电视机、Nas、中枢关网等。书房接了个路由器 mesh 有线回程组网。</p><p>弱电箱留两根网线，也是回程的需要，也可以一根。现在光纤也便宜，可以装修的时候预埋光纤，指不定过几年，千兆光宽飞入「寻常百姓家」。</p><h3 id=拓展阅读>拓展阅读</h3><p>无线网络是一个非常复杂的问题，下文内容也仅在信道，频宽，发射功率做一些初级优化。大多数用户的网络环境也不尽相同：对于单 AP 的家庭网络环境，只需要对信道和频宽进行一定调整；多 AP 用户则需要根据周围干扰，使用区域，信号强度，漫游速度等对各个 AP 调整信道频宽以及发射功率。在优化无线网络的时候还是要具体问题具体分析。
<a href=https://sspai.com/post/72111>看起来很快的 Wi-Fi 看视频老是需要缓冲？家庭 Wi-Fi 优化指南</a></p><hr><p>有机会再讲讲什么是软路由，什么是硬路由，晚安～</p></div></div><div class=archives_nrong><div class=archives_one><div><div class=archive-title><a href=/mingxiajizhua/>虾与鸡的相遇 从厨房开始</a></div><div class=archive-time data-timestamp=1690070400></div></div><div class=archive-img><a href=/mingxiajizhua/><img loading=lazy decoding=async src=https://img.monikio.com/2023/09/20230904-1.webp></a></div></div><div class=archives_one><div><div class=archive-title><a href=/suanxiangyupian/>岂曰无鱼？家常菜 蒜香鱼片</a></div><div class=archive-time data-timestamp=1690588800></div></div><div class=archive-img><a href=/suanxiangyupian/><img loading=lazy decoding=async src=https://img.monikio.com/2023/09/20230904-8.webp></a></div></div></div><div class=article-comments><link href=https://npm.elemecdn.com/artalk@2.5.5/dist/ArtalkLite.css rel=stylesheet><script src=https://npm.elemecdn.com/artalk@2.5.5/dist/ArtalkLite.js></script><div id=Comments></div><script>new Artalk({el:"#Comments",pageKey:"https://monikio.com/zuwangfangan/",pageTitle:"我的家庭网络组网方案",server:"https://talk.monikio.com",site:"Monikio"})</script></div></div><div class=footer-background><div class=footer><div>Made with love</div><div class=footer-info>&copy; 2023
Powered by
<a href=https://gohugo.io/ target=_blank>Hugo</a>
Theme by <a href=https://github.com/koobai/blog target=_blank>Koobai</a> & <a href=https://openai.com/ target=_blank>ChatGPT</a>.</div></div><script type=text/javascript src="/js/moment.min.js?v=2.29.4"></script>
<script type=text/javascript src=/js/moment.twitter.min.js></script>
<script src=/js/view-image.min.js></script>
<script async src=https://umami-hazel-six.vercel.app/hugo-ladder data-website-id=35394c6c-bd35-4228-bbcc-17a6ffe1b1f8></script><div class=gotop_hide><div class=gotop onclick=smoothScrollTop() id=gotop><img src=https://img.monikio.com/2023/07/up.svg alt=回到顶部></div></div><script>window.addEventListener("load",function(){document.body.classList.add("loaded")})</script><script type=text/javascript src=/js/bundle.min.a97e791051a5af367b389e4eb91a934673e2dde79669745672f085b871c342fb.js></script></body></html>